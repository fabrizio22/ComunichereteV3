<?Php/*Plugin Name: Widget ricerca utentePlugin Script: wp-wg-ricerca-utente.phpDescription: si potrà inserire una ricerca utente nella sezione della sidebar che ci interessaVersion: 1.0License: GPL 2.0Author: Fabrizio Fatelli*/// rimuove dalla <head> la info sulla versione di wordpress installata sul sitoremove_action('wp_head', 'wp_generator');// toglie suggerimenti nella pagine di login in caso di login erratoadd_filter('login_errors',create_function('$a', "return null;"));wp_enqueue_style('ricerca_utente_css', WP_PLUGIN_URL . '/wp-wg-ricerca-utente/css/ricerca_utente.css');wp_enqueue_script('ricerca_utente_js', WP_PLUGIN_URL . '/wp-wg-ricerca-utente/js/ricerca_utente.js', array('jquery'));class wg_ricerca_utente extends WP_Widget{    public function __construct()    {        parent::WP_Widget( 'ricerca-utente', 'RICERCA UTENTE', array('description' => 'Grazie a questo wg sarà possibile effettuare la ricerca utente'));    }    public function form( $instance ){?>    <?php    }    public function widget( $args, $instance )    {        global $wpdb;        extract( $args );        $bp_prefix = bp_core_get_table_prefix();        //$title = apply_filters('widget_title', 'Ricerca Profilo' );        $nomeUtente = $_POST['nomeUtente'];        $inputCognome = $_POST['inputCognome'];        $pubblicaAmministrazioneRicerca = $_POST['pubblicaAmministrazioneRicerca'];        $qualifiche = $_POST['qualifiche'];        $inputNomeEnte = $_POST['inputNomeEnte'];        $divLinkSelectEvolutaReg =  $_POST['valoreSelectReg'];        $divLinkSelectEvolutaProv = $_POST['valoreSelectProv'];        $divLinkSelectEvolutacom = $_POST['comune'];        $tipologia_qualifica = $wpdb->get_results($wpdb->prepare("SELECT * FROM wp_cm_qualifiche where voce_qualifiche = %s", $qualifiche));        $ufficio = $tipologia_qualifica[0] -> ufficio;        $nuclei =  $tipologia_qualifica[0] -> nuclei;        $deleghe = $tipologia_qualifica[0] -> deleghe;        $settori = $tipologia_qualifica[0] -> settori;        $dipartimenti = $tipologia_qualifica[0] -> dipartimenti;        $direzioni = $tipologia_qualifica[0] -> direzioni;//            if(($userId =="") || ($userId ==null)){//                if(){//                    $profile_fieldsId_Name_id = $wpdb->get_var( "SELECT id FROM {$bp_prefix}bp_xprofile_fields where name = '". $val_fild_reg[0]."'");//                    //$queryqual = $wpdb->get_var( $wpdb->prepare("SELECT name FROM wp_bp_xprofile_data WHERE value = %s", $id_fileld ));//                }////            }        echo $before_widget;        echo $before_title . $title . $after_title;        ?>        <div class="contenitore" id="contenitore">            <?php include_once('inc/filtri_ricerca.php'); ?>            <div class="contentRisultato" id="contentRisultato">                <div id="risultatoRicercaUtenteFiltri" class="risultatoRicercaUtenteFiltri">                    <div id="linkNavigazione" class="linkNavigazione"><!-- #contiene i tasti di navigazione risultato -->                        <div class="ricercaProfili ricercaProfiliPosizione " id="ricercaProfili">                            <div id="ricercaProfiliImg" class="ricercaProfiliImg ">                                <div id="ricercaProfiliImgWrap" class="ricercaProfiliImgWrap"></div>                            </div>                            <label class="descrizioneTNavigazione" id="descrizioneTNavigazione">Ricerca Profili</label>                        </div>                        <div class="mieiContatti mieiContattiPosizione" id="mieiContatti">                            <div class="mieiContattiImg">                                <div id="mieiContattiImgWrap" class="mieiContattiImgWrap"></div>                            </div>                            <label class="descrizioneTNavigazione" id="descrizioneTNavigazione">Miei Contatti</label>                        </div>                        <div class="richiestaCollaborazione richiestaCollaborazionePosizione" id="richiestaCollaborazione">                            <div id="richiestaCollaborazioneImg" class="richiestaCollaborazioneImg">                                <div id="richiestaCollaborazioneImgWrap" class="richiestaCollaborazioneImgWrap"></div>                            </div>                            <label class="descrizioneTNavigazioneColl" id="descrizioneTNavigazioneColl">Richiesta di collaborazione</label>                        </div>                    </div>                    <div id="areaFiltri" class="areaFiltri"> <!-- #contiene i filtri profilati -->                        <div id="intestazioneFiltri" class="intestazioneFiltri">Affina la Ricerca</div>                        <?php if($ufficio == 'ok'){ ?>                            <div class="affinaRicercaFiltro" id="affinaRicercaFiltro">                                <?php include('inc/qualifiche/comuni/cm_Uffici.php'); ?>                            </div>                        <? } ?>                        <?php if($nuclei == 'ok'){ ?>                            <div class="affinaRicercaFiltro" id="affinaRicercaFiltro">                                <?php include('pubblicaAmministrazione.php'); ?>                            </div>                        <? } ?>                        <?php if($deleghe == 'ok'){ ?>                            <div class="affinaRicercaFiltro" id="affinaRicercaFiltro">                                <?php include('inc/qualifiche/comuni/cm_deleghe.php'); ?>                            </div>                        <? } ?>                        <?php if($settori == 'ok'){ ?>                            <div class="affinaRicercaFiltro" id="affinaRicercaFiltro">                                <?php include('inc/qualifiche/comuni/cm_Settori.php'); ?>                            </div>                        <? } ?>                        <?php if($dipartimenti == 'ok'){ ?>                            <div class="affinaRicercaFiltro" id="affinaRicercaFiltro">                                <?php include('pubblicaAmministrazione.php'); ?>                            </div>                        <? } ?>                        <?php if($direzioni == 'ok'){ ?>                            <div class="affinaRicercaFiltro" id="affinaRicercaFiltro">                                <?php include('pubblicaAmministrazione.php'); ?>                            </div>                        <? } ?>                    </div>                </div>                <div id="contenitoreRisultato" class="contenitoreRisultato"><!-- #contenitore dei risultati -->                    <div id="contenitoreScroll" class="contenitoreScroll"><!-- #contennitore per scroll risultati utente -->                        <div id="areaElencoUtenti" class="areaElencoUtenti"><!-- #contenitore risultato utente -->                            <div class="schedaUtente" >                                <div id="intestazioneFil" class="intestazioneFil">                                    <div id="utente" class="utente">Fabrizio Fatelli</div>                                    <div class="frecciaDetUtente"></div>                                </div>                                <div class="contentAvatar"><div id="avatar" class="avatar"><img class="subImgAvat" src="<?php echo content_url() ?>/plugins/wp-wg-ricerca-utente/img/Richieste-Collaborazione.png"></div></div>                                <div id="stemma" class="stemma"></div>                                <div id="entefiltro"  class="entefiltro">Comune di Milano</div>                                <div id="maggInfo" class="maggInfo">i</div>                                <div class="qualidicaDes" id="qualidicaDes">Presidente del Consiglio</div>                                <div id="delegaDes" class="delegaDes">Deleghe : Affari Generali, Salure, Relazioni</div>                            </div>                            <div class="schedaUtente" >                                <div id="intestazioneFil" class="intestazioneFil">                                    <div id="utente" class="utente">Fabrizio Fatelli</div>                                    <div class="frecciaDetUtente"></div>                                </div>                                <div class="contentAvatar"><div id="avatar" class="avatar"></div></div>                                <div id="stemma" class="stemma"></div>                                <div id="entefiltro"  class="entefiltro">Comune di Milano</div>                                <div id="maggInfo" class="maggInfo">Maggiori informazioni</div>                                <div class="qualidicaDes" id="qualidicaDes">Presidente del Consiglio</div>                                <div id="delegaDes" class="delegaDes">Deleghe : Affari Generali, Salure, Relazioni ..</div>                            </div>                            <div class="schedaUtente" >                                <div id="intestazioneFil" class="intestazioneFil">                                    <div id="utente" class="utente">Fabrizio Fatelli</div>                                    <div class="frecciaDetUtente"></div>                                </div>                                <div class="contentAvatar"><div id="avatar" class="avatar"></div></div>                                <div id="stemma" class="stemma"></div>                                <div id="entefiltro"  class="entefiltro">Comune di Milano</div>                                <div id="maggInfo" class="maggInfo">Maggiori informazioni</div>                                <div class="qualidicaDes" id="qualidicaDes">Presidente del Consiglio</div>                                <div id="delegaDes" class="delegaDes">Deleghe : Affari Generali, Salure, Relazioni ..</div>                            </div>                            <div class="schedaUtente" >                                <div id="intestazioneFil" class="intestazioneFil">                                    <div id="utente" class="utente">Fabrizio Fatelli</div>                                    <div class="frecciaDetUtente"></div>                                </div>                                <div class="contentAvatar"><div id="avatar" class="avatar"></div></div>                                <div id="stemma" class="stemma"></div>                                <div id="entefiltro"  class="entefiltro">Comune di Milano</div>                                <div id="maggInfo" class="maggInfo">Maggiori informazioni</div>                                <div class="qualidicaDes" id="qualidicaDes">Presidente del Consiglio</div>                                <div id="delegaDes" class="delegaDes">Deleghe : Affari Generali, Salure, Relazioni ..</div>                            </div>                            <div class="schedaUtente" >                                <div id="intestazioneFil" class="intestazioneFil">                                    <div id="utente" class="utente">Fabrizio Fatelli</div>                                    <div class="frecciaDetUtente"></div>                                </div>                                <div class="contentAvatar"><div id="avatar" class="avatar"></div></div>                                <div id="stemma" class="stemma"></div>                                <div id="entefiltro"  class="entefiltro">Comune di Milano</div>                                <div id="maggInfo" class="maggInfo">Maggiori informazioni</div>                                <div class="qualidicaDes" id="qualidicaDes">Presidente del Consiglio</div>                                <div id="delegaDes" class="delegaDes">Deleghe : Affari Generali, Salure, Relazioni</div>                            </div>                            <div class="schedaUtente" >                                <div id="intestazioneFil" class="intestazioneFil">                                    <div id="utente" class="utente">Fabrizio Fatelli</div>                                    <div class="frecciaDetUtente"></div>                                </div>                                <div class="contentAvatar"><div id="avatar" class="avatar"></div></div>                                <div id="stemma" class="stemma"></div>                                <div id="entefiltro"  class="entefiltro">Comune di Milano</div>                                <div id="maggInfo" class="maggInfo">Maggiori informazioni</div>                                <div class="qualidicaDes" id="qualidicaDes">Presidente del Consiglio</div>                                <div id="delegaDes" class="delegaDes">Deleghe : Affari Generali, Salure, Relazioni ..</div>                            </div><br>                            <div class="schedaUtente" >                                <div id="intestazioneFil" class="intestazioneFil">                                    <div id="utente" class="utente">Fabrizio Fatelli</div>                                    <div class="frecciaDetUtente"></div>                                </div>                                <div class="contentAvatar"><div id="avatar" class="avatar"></div></div>                                <div id="stemma" class="stemma"></div>                                <div id="entefiltro"  class="entefiltro">Comune di Milano</div>                                <div id="maggInfo" class="maggInfo">Maggiori informazioni</div>                                <div class="qualidicaDes" id="qualidicaDes">Presidente del Consiglio</div>                                <div id="delegaDes" class="delegaDes">Deleghe : Affari Generali, Salure, Relazioni ..</div>                            </div><br>                            <div class="schedaUtente" >                                <div id="intestazioneFil" class="intestazioneFil">                                    <div id="utente" class="utente">Fabrizio Fatelli</div>                                    <div class="frecciaDetUtente"></div>                                </div>                                <div class="contentAvatar"><div id="avatar" class="avatar"></div></div>                                <div id="stemma" class="stemma"></div>                                <div id="entefiltro"  class="entefiltro">Comune di Milano</div>                                <div id="maggInfo" class="maggInfo">Maggiori informazioni</div>                                <div class="qualidicaDes" id="qualidicaDes">Presidente del Consiglio</div>                                <div id="delegaDes" class="delegaDes">Deleghe : Affari Generali, Salure, Relazioni ..</div>                            </div><br>                            <div class="schedaUtente" >                                <div id="intestazioneFil" class="intestazioneFil">                                    <div id="utente" class="utente">Fabrizio Fatelli</div>                                    <div class="frecciaDetUtente"></div>                                </div>                                <div class="contentAvatar"><div id="avatar" class="avatar"></div></div>                                <div id="stemma" class="stemma"></div>                                <div id="entefiltro"  class="entefiltro">Comune di Milano</div>                                <div id="maggInfo" class="maggInfo">Maggiori informazioni</div>                                <div class="qualidicaDes" id="qualidicaDes">Presidente del Consiglio</div>                                <div id="delegaDes" class="delegaDes">Deleghe : Affari Generali, Salure, Relazioni ..</div>                            </div><br>                        </div>                    </div>                    <div id="infoUtente" class="infoUtente"><!-- #contenitore info utente -->                    </div>                </div>            </div>        </div>        <?php        echo $after_widget;    }}function wg_ricerca_utente(){    register_widget( 'wg_ricerca_utente' );}add_action( 'widgets_init', 'wg_ricerca_utente' );?>